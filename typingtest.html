<html>
    <head>
        <title>
           Typing test
        </title>
        <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
        <link rel="stylesheet" name="text/css" href="typing.css">
    </head>
    
    <body>
         
        <div class="maindiv">
         <div class="centerdiv">
                <h1>Welcome to Typing speed Test</h1>
                <h2 id="msg"></h2>
                <br>

                <textarea cols="100" rows="10" id="mywords" placeholder="Click the start button to Test your typing speed!" ></textarea>
                <br>
                <br>
                <button  class="mainbtn" id="btn">
                 Start
                </button>
         </div>
        </div>


        <script>
            const setOfWords=[
                "My name is Ahmad raza.I am an Civil engineer.Hope you are having fun this is a simple game to make.If you want to meet me in person then i will give you my address.When you reach there please call me or text me i will reach upto you. ",
                "Hope you are having fun this is a simple game to make.",
                "If you want to meet me in person then i will give you my address.When you reach there please call me or text me i will reach upto you."
            ];

            const msg= document.getElementById('msg');
            const typeWords=document.getElementById('mywords');
            const btn= document.getElementById('btn');

            let startTime,endTime;

           const playgame = () =>{
                                let randomnumber = Math.floor(Math.random()*setOfWords.length);
                                msg.innerText=setOfWords[randomnumber];
                                let date = new Date();
                                startTime=date.getTime();
                                btn.innerText="Done";
            }
            const endPlay = () =>{
                let date = new Date();
                endTime=date.getTime();
                let totalTime=((endTime - startTime)/1000);
                console.log(totalTime);

                let totalStr= typeWords.value;
                let wordCount= wordCounter(totalStr);

                let speed= Math.round((wordCount/totalTime)*60);
                let finalMsg= "You typed total of" + " " + speed + " "+"words per minutes."+" ";
                finalMsg+= compareWords(msg.innerText,totalStr);
                msg.innerText =finalMsg;
              }
              const compareWords=(str1,str2)=>{
                let words1=str1.split(" ");
                let words2=str2.split(" ");
                let  cnt=0;

                words1.forEach(function (item,index){
                    if(item == words2[index]){
                        cnt++;
                    }
                    
                })
                let errorWords=(words1.length-cnt);
                return(cnt +" " + "correct out of"+" " + words1.length+" "+ "words and the total number of error are" +" "+ errorWords +  ".");
              }

            const wordCounter = (str) =>{
                                  let response=str.split(" ").length;
                                  console.log(response);
                                  return response;
            }

            btn.addEventListener('click',function(){
                if(this.innerText=='Start'){
                    typeWords.disabled=false;
                    playgame();
                     }else if(this.innerText=='Done'){
                                typeWords.disabled=false;
                                btn.innertext="Start";
                                endPlay();

                     }
            })
        </script>
    </body>
</html>